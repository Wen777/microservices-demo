{
    "family": "monitor",
    "containerDefinitions": [
        {
            "name": "influxsrv",
            "image": "tutum/influxdb",
            "cpu": 2,
            "memory": 300,
            "portMappings": [
                {
                    "containerPort": 8083,
                    "hostPort": 8083
                },
                {
                    "containerPort": 8086,
                    "hostPort": 8086
                }
            ],
            "essential": true,
            "environment": [
                {"name": "PRE_CREATE_DB", "value": "cadvisor"},
                {"name": "ADMIN_USER", "value": "root"},
                {"name": "INFLUXDB_INIT_PWD", "value": "hyperpilot"}
            ]
        },
        {
            "name": "metrics",
            "image": "wen777/consumer-metrics",
            "cpu": 2,
            "memory": 300,
            "portMappings": [
                {
                    "containerPort": 3000,
                    "hostPort": 4000
                }
            ],
            "links": ["influxsrv"],
            "essential": true,
            "environment": [
                {"name": "NODE_ENV", "value": "production"}
            ]
        },
        {
            "name": "grafana",
            "image": "grafana/grafana",
            "cpu": 2,
            "memory": 300,
            "portMappings": [
                {
                    "containerPort": 3000,
                    "hostPort": 3000
                }
            ],
            "essential": true,
            "links": ["influxsrv"],
            "environment": [
                {"name": "INFLUXDB_HOST", "value": "localhost"},
                {"name": "INFLUXDB_PORT", "value": "8086"},
                {"name": "INFLUXDB_NAME", "value": "telegraf"},
                {"name": "GF_INSTALL_PLUGINS", "value": "grafana-clock-panel,grafana-piechart-panel"},
                {"name": "INFLUXDB_USER", "value": "root"},
                {"name": "INFLUXDB_PASS", "value": "hyperpilot"}
            ]
        },
        {
            "name": "telegraf",
            "image": "wen777/telegraf",
            "cpu": 2,
            "memory": 300,
            "links": ["influxsrv"],
            "command": ["--config=/etc/telegraf.conf"],
            "essential": true,
            "mountPoints": [
                {
                    "sourceVolume": "root",
                    "containerPath": "/rootfs",
                    "readOnly": true
                },
                {
                    "sourceVolume": "var_run",
                    "containerPath": "/var/run",
                    "readOnly": false
                },
                {
                    "sourceVolume": "sys",
                    "containerPath": "/sys",
                    "readOnly": true
                },
                {
                    "sourceVolume": "var_lib_docker",
                    "containerPath": "/var/lib/docker",
                    "readOnly": true
                }
            ]
        }
    ],
    "volumes": [
        {
            "name": "root",
            "host": {
                "sourcePath": "/"
            }
        },
        {
            "name": "var_run",
            "host": {
                "sourcePath": "/var/run"
            }
        },
        {
            "name": "sys",
            "host": {
                "sourcePath": "/sys"
            }
        },
        {
            "name": "var_lib_docker",
            "host": {
                "sourcePath": "/var/lib/docker/"
            }
        }
    ]
}
